<button class="btn js-toggle-dark-mode" id="toggle-dark-mode" style="position: fixed; bottom: 20px; left: 200px; padding: 10px; transition: opacity 0.3s ease;">☾ dark</button>

<script>
    const btnToggle = document.querySelector('.js-toggle-dark-mode');

    if (localStorage.getItem('theme') === 'dark') {
        jtd.setTheme('dark');
        btnToggle.textContent = '☼ light';
    } else {
        jtd.setTheme('light');
        btnToggle.textContent = '☾ dark';
    }

    const toggleDarkMode = document.querySelector('.js-toggle-dark-mode');

    jtd.addEvent(toggleDarkMode, 'click', function () {
        if (jtd.getTheme() === 'dark') {
            jtd.setTheme('light');
            toggleDarkMode.textContent = '☾ dark';
            localStorage.setItem('theme', 'light');
        } else {
            jtd.setTheme('dark');
            toggleDarkMode.textContent = '☼ light';
            localStorage.setItem('theme', 'dark');
        }
    });

    // Scroll detection to hide and show the button
    let scrollTimeout;

    // Detect if user is on mobile
    function isMobile() {
        return window.innerWidth <= 768; // You can adjust this breakpoint
    }

    window.addEventListener('scroll', function () {
        const button = document.getElementById('toggle-dark-mode');

        // Hide the button only on mobile or always if desired
        if (isMobile()) {
            button.style.opacity = '0';
            
            // Clear the previous timeout if it exists
            clearTimeout(scrollTimeout);
            
            // Show the button again after 500ms when scrolling stops
            scrollTimeout = setTimeout(function () {
                button.style.opacity = '1';
            }, 500);
        }
    });

</script>

<style>
    /* Media query for mobile-specific styles */
    @media (max-width: 768px) {
        #toggle-dark-mode {
            left: 20px; /* Adjust alignment on mobile to fit properly */
        }
    }
</style>
